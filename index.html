<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Story Builder V0.05</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
</head>
<body>

    <div id="login-screen" class="screen login-container">
        <div class="app-logo">STORY BUILDER</div>
        <button id="google-login-btn" class="primary-btn">Googleでログイン</button>
    </div>

    <div id="main-app" class="screen" style="display:none;">
        
        <div id="top-view" class="view-section">
            <header class="top-header">
                <div class="app-logo" style="font-size: 1.5em;">STORY BUILDER <span style="font-size:0.5em; color:#888;">Prototype V0.05</span></div>
                <div class="top-dashboard">
                    <div class="diary-widget">
                        <div class="diary-header">執筆日記（本日）</div>
                        <div class="diary-content">
                            <div class="diary-item">
                                <span class="diary-label">執筆文字数</span>
                                <span class="diary-val" id="widget-today-count">0</span>
                            </div>
                            <div class="diary-divider"></div>
                            <div class="diary-item">
                                <span class="diary-label">執筆時間</span>
                                <span class="diary-val" id="widget-today-time">0m</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="top-actions">
                        <button id="btn-stats" class="action-box-btn">📊 執筆統計</button>
                        <button id="btn-common-memo" class="action-box-btn">📝 共通メモ</button>
                    </div>
                </div>
            </header>

            <div class="divider-line"></div>

            <div class="filter-controls">
                <select id="sort-order" class="custom-select">
                    <option value="updated">更新順</option>
                    <option value="created">作成日順</option>
                    <option value="status">制作ステータス順</option>
                </select>
                <button id="create-new-work-btn" class="add-btn-green">+ 新規作品作成</button>
            </div>

            <div id="work-list" class="work-list-container">
                </div>
        </div>

        <main id="workspace-view" class="view-section" style="display:none;">
            <div class="workspace-tabs">
                <button class="tab-btn active" data-tab="tab-info">作品情報</button>
                <button class="tab-btn" data-tab="tab-plot">プロット</button>
                <button class="tab-btn" data-tab="tab-char">登場人物</button>
                <button class="tab-btn" data-tab="tab-editor">執筆</button>
                <button id="back-to-top" class="tab-btn back-tab">← TOPへ</button>
            </div>

            <div id="tab-info" class="tab-content active">
                <div style="max-width: 800px; margin: 0 auto; width: 100%; display: flex; flex-direction: column; gap: 15px;">
                    
                    <div>
                        <label>タイトル</label>
                        <input type="text" id="work-title-input" placeholder="作品タイトル" style="width: 100%; font-size: 1.2em; font-weight: bold;">
                    </div>

                    <div>
                        <label>キャッチコピー <span id="catchphrase-counter" style="font-size:0.8em; color:#89b4fa;">(残り 35文字)</span></label>
                        <input type="text" id="work-catchphrase" placeholder="読者を惹きつける一言（35文字以内）" maxlength="35" style="width: 100%;">
                    </div>

                    <div style="display: flex; gap: 10px;">
                        <div style="flex: 1;">
                            <label>メインジャンル</label>
                            <input type="text" id="work-genre-main" placeholder="例：ファンタジー" style="width: 100%;">
                        </div>
                        <div style="flex: 1;">
                            <label>サブジャンル</label>
                            <input type="text" id="work-genre-sub" placeholder="例：異世界転生" style="width: 100%;">
                        </div>
                    </div>

                    <div>
                        <label>作品形式</label>
                        <select id="work-type" class="custom-select" style="width: 100%;">
                            <option value="original">オリジナル小説</option>
                            <option value="fanfic">二次創作小説</option>
                        </select>
                    </div>

                    <div>
                        <label>あらすじ（紹介文）</label>
                        <textarea id="work-desc-input" rows="5" placeholder="作品のあらすじ" style="width: 100%;"></textarea>
                    </div>

                    <div style="background: #2a2a2a; padding: 10px; border: 1px solid #444; border-radius: 4px;">
                        <div style="margin-bottom: 10px;">
                            <label style="color:#aaa; font-size:0.9em;">セルフレイディング（複数選択可）</label><br>
                            <label><input type="checkbox" class="rating-chk" value="cruel"> 残酷描写あり</label>
                            <label><input type="checkbox" class="rating-chk" value="violence"> 暴力描写あり</label>
                            <label><input type="checkbox" class="rating-chk" value="sexual"> 性描写あり</label>
                        </div>
                        <div style="border-top: 1px dashed #444; padding-top: 10px;">
                            <label style="color:#aaa; font-size:0.9em;">AI生成の利用</label><br>
                            <label><input type="radio" name="ai_usage" value="none" checked> AI使用なし</label>
                            <label><input type="radio" name="ai_usage" value="assist"> AI補助利用</label>
                            <label><input type="radio" name="ai_usage" value="part"> AI本文一部利用</label>
                            <label><input type="radio" name="ai_usage" value="full"> AI本文利用</label>
                        </div>
                    </div>

                    <div>
                        <label>制作状況</label>
                        <select id="work-status" class="custom-select">
                            <option value="in_progress">制作中</option>
                            <option value="completed">制作完了</option>
                            <option value="suspended">制作中断</option>
                        </select>
                    </div>

                    <button id="save-work-info-btn" class="add-btn-green">保存する</button>
                </div>
            </div>

            <div id="tab-plot" class="tab-content">
                <textarea id="plot-editor" style="width:100%; height:100%; resize:none;" placeholder="プロットや構成案をここに記述..."></textarea>
            </div>

            <div id="tab-char" class="tab-content">
                <textarea id="char-editor" style="width:100%; height:100%; resize:none;" placeholder="キャラクター設定をここに記述..."></textarea>
            </div>

            <div id="tab-editor" class="tab-content">
                <div class="editor-layout">
                    <div class="main-editor-area">
                        <div class="editor-toolbar">
                            <span id="editor-char-count">0文字</span>
                            <button class="mini-btn">縦書きプレビュー(仮)</button>
                        </div>
                        <div class="editor-wrapper">
                            <textarea id="main-editor" placeholder="ここに本文を執筆..."></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <div id="stats-view" class="view-section" style="display:none; padding:20px;">
            <button id="back-from-stats" class="primary-btn">戻る</button>
            <h2 class="stats-title-large">WRITING LOG</h2>
            <p style="text-align:center;">統計機能は現在開発中です。</p>
        </div>

        <div id="memo-view" class="view-section" style="display:none; padding:20px;">
            <button id="back-from-memo" class="primary-btn">戻る</button>
            <h2>共通メモ</h2>
            <div class="memo-list">
                </div>
        </div>

    </div>

    <script src="script.js"></script>
</body>
</html>