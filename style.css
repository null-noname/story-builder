:root{--bg-color:#202020;--active-green:#2b4034;--btn-bg:#222222;--text-white:#f5f5f5;--sub-text:#aaaaaa;--accent-blue:#89b4fa;--accent-green:#4caf50;--danger-red:#d32f2f;--input-bg:#1a1a1a;--border-color:#555;--font-ui:"Helvetica Neue",Arial,"Hiragino Kaku Gothic ProN","Hiragino Sans",Meiryo,sans-serif;--font-editor:"MS Gothic","MS ゴシック",monospace;--ed-font-size:16px;--ed-line-height:1.8;--ed-letter-spacing:0em;--ed-width:100%;--pr-font-size:18px;--pr-line-height:2.0;--pr-height:auto}*{box-sizing:border-box;font-family:var(--font-ui)!important}body{background-color:var(--bg-color);color:var(--text-white);margin:0;padding:0;height:100vh;overflow:hidden}.screen{display:flex;flex-direction:column;height:100%;padding:15px}.scrollable{overflow-y:auto;-webkit-overflow-scrolling:touch}.container{max-width:1000px;margin:0 auto;width:100%;display:flex;flex-direction:column;height:100%}#top-view{min-height:0;flex:1}.app-title{font-size:28px;color:#fff;margin:0 0 10px 0;font-weight:bold}hr{border:0;border-top:1px solid #444;margin:10px 0;width:100%}.btn-custom{background:var(--btn-bg);color:var(--text-white);border:1px solid #555;padding:10px;cursor:pointer;font-size:14px;font-weight:bold;border-radius:6px}.btn-custom:active,.btn-custom.active{background:var(--active-green)!important}.btn-full{width:100%;height:42px;margin-bottom:8px;font-size:15px;display:flex;align-items:center;justify-content:center}.btn-small{padding:5px 12px;font-size:12px}.btn-green{background-color:var(--accent-green);color:#fff;border:none;padding:8px 16px;border-radius:4px;font-weight:bold}.btn-red{background-color:var(--danger-red);color:#fff;border:none;padding:8px 16px;border-radius:4px;font-weight:bold}.dashboard-area{display:flex;gap:15px;margin-bottom:15px;height:auto;min-height:100px}.diary-widget{background:var(--btn-bg);padding:12px;border-radius:8px;flex:1;border:1px solid #444;display:flex;flex-direction:column;justify-content:center}.diary-title{font-weight:bold;font-size:14px;color:#ccc;margin-bottom:8px}.diary-content{display:flex;flex-direction:column;gap:5px}.diary-row{display:flex;justify-content:space-between;align-items:baseline}.diary-label{font-size:13px;color:#aaa}.diary-val{font-size:18px;font-weight:bold;color:var(--accent-blue)}.diary-val .unit{font-size:12px;color:var(--text-white);margin-left:2px}.top-buttons{width:140px;display:flex;flex-direction:column;gap:5px}.list-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.list-title{font-size:22px;font-weight:bold;color:#fff}.filter-group{display:flex;gap:5px}.filter-select{background:var(--input-bg);color:#fff;border:1px solid #555;padding:6px;border-radius:4px;font-size:13px}.work-list-container{flex:1;overflow-y:auto;padding-bottom:20px}.work-item{background:#2a2a2a;padding:10px 12px;margin-bottom:8px;border-radius:8px;border:1px solid #555;border-left:5px solid #fff;display:flex;flex-direction:row;align-items:center;justify-content:space-between;min-height:80px}.work-item.pinned{border-left-color:var(--accent-green)}.work-info{cursor:pointer;flex:1;display:flex;flex-direction:column;justify-content:center;gap:6px}.work-title{font-size:17px;font-weight:bold;color:#fff;display:flex;align-items:center}.work-meta-container{display:flex;flex-direction:column;gap:2px}.work-meta-row{font-size:11px;color:#aaa;line-height:1.3}.work-actions{display:flex;gap:8px;align-items:center}.btn-card-action{background:transparent;border:1px solid #666;color:#ddd;padding:6px 12px;font-size:12px;border-radius:6px;transition:background .2s}.btn-card-action:hover{background:#333}.btn-card-delete{color:#ff8888}.form-group{margin-bottom:15px}.form-group label{display:block;margin-bottom:6px;color:#ddd;font-size:14px;font-weight:bold}.form-section-title{font-size:16px;font-weight:bold;color:var(--accent-blue);margin-top:20px;margin-bottom:10px;border-bottom:1px solid #444;padding-bottom:5px}input,textarea,select.form-control{background:var(--input-bg);color:#fff;border:1px solid #555;padding:10px;border-radius:6px;width:100%;font-size:15px;margin-bottom:0;outline:none}input:focus,textarea:focus{border-color:var(--accent-blue)}.main-textarea{font-family:var(--font-editor)!important;width:100%;background:#151515;color:#eee;padding:15px;border:none;resize:none;margin:0 auto;font-size:var(--ed-font-size);line-height:var(--ed-line-height);letter-spacing:var(--ed-letter-spacing);max-width:var(--ed-width)}.main-textarea.vertical-mode{writing-mode:vertical-rl;text-orientation:upright}.compact-row{display:flex;gap:5px;flex-wrap:wrap}.compact-row label{flex:1;text-align:center;padding:8px;font-size:13px;border:1px solid #555;border-radius:4px;background:#2a2a2a;color:#ccc;min-width:60px}.compact-row label:has(input:checked){background:var(--active-green);border-color:#555;color:#fff}.compact-row input{display:none}.memo-add-btn{background-color:var(--active-green);color:#fff;font-weight:bold;width:100%;padding:12px;margin-bottom:15px;border-radius:6px;border:1px solid #444}.memo-card{background:#2a2a2a;border:1px solid #444;border-radius:6px;padding:12px;margin-bottom:10px}.memo-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.memo-title{color:#9ccc65;font-weight:bold;font-size:16px}.memo-controls{display:flex;gap:8px}.memo-btn{background:transparent;border:1px solid #666;color:#ddd;padding:4px 10px;font-size:12px;border-radius:4px;cursor:pointer}.memo-btn:hover{background:#333}.memo-btn-delete{color:#ff8888}.memo-text{font-size:14px;color:#ddd;line-height:1.5;white-space:pre-wrap;margin-top:5px;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.plot-card{background:#2a2a2a;border:1px solid #444;border-radius:6px;padding:10px;margin-bottom:10px;cursor:pointer;transition:background .2s;position:relative}.plot-card:hover{background:#333}.plot-card-header{display:flex;justify-content:space-between;margin-bottom:5px;align-items:center}.plot-card-title{font-weight:bold;color:var(--accent-blue);flex:1}.plot-card-type{font-size:10px;padding:2px 5px;border-radius:3px;background:#555;color:#fff;margin-left:5px}.plot-card-preview{font-size:12px;color:#aaa;line-height:1.4;display:-webkit-box;-webkit-line-clamp:5;-webkit-box-orient:vertical;overflow:hidden;margin-top:5px;white-space:pre-wrap}.plot-actions{display:flex;gap:5px;margin-left:10px}.sort-btn{background:#444;border:1px solid #666;color:#fff;width:24px;height:24px;display:flex;align-items:center;justify-content:center;border-radius:4px;cursor:pointer}.char-card{background:#2a2a2a;border:1px solid #444;border-radius:6px;padding:8px;cursor:pointer;display:flex;flex-direction:row;align-items:center;height:auto;margin-bottom:5px;width:100%}.char-card:hover{background:#333}.char-icon{width:40px;height:40px;border-radius:50%;background:#333;margin-right:12px;object-fit:cover;display:flex;align-items:center;justify-content:center;font-size:20px;border:1px solid #555;flex-shrink:0}.char-name{font-weight:bold;color:#fff;font-size:14px;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.char-sort-controls{display:flex;flex-direction:column;gap:2px;margin-left:auto;order:2}.char-sort-btn{width:20px;height:20px;font-size:10px;background:#444;border:1px solid #666;color:#fff;border-radius:3px;cursor:pointer;display:flex;align-items:center;justify-content:center}.edit-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:var(--bg-color);z-index:50;display:flex;flex-direction:column}.edit-overlay-header{display:flex;justify-content:space-between;align-items:center;padding:10px;background:#2a2a2a;border-bottom:1px solid #444}.edit-overlay-body{flex:1;padding:15px}.char-icon-large{width:100px;height:100px;border-radius:50%;background:#333;margin:0 auto;object-fit:cover;display:flex;align-items:center;justify-content:center;font-size:40px;border:2px solid #555}.compact-grid-form{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:15px}.cg-item{display:flex;flex-direction:column;max-width:220px}.cg-item label{font-size:12px;color:#aaa;margin-bottom:4px}.cg-input-wrap{display:flex;align-items:center;gap:5px}.cg-input-wrap input{flex:1;text-align:center}.cg-input-wrap span{font-size:12px;color:#888;width:30px}.birth-wrap{border:1px solid #555;border-radius:6px;background:var(--input-bg);padding:0 5px}.birth-wrap input{background:transparent;border:none;outline:none;padding:10px 5px;text-align:center}.birth-wrap input:focus{border:none;outline:none}.tab-bar{display:flex;gap:1px;margin-bottom:8px;background:#333;padding:2px;border-radius:6px}.tab-btn{flex:1;padding:8px 0;font-size:12px;background:transparent;border:none;color:#aaa;text-align:center}.tab-btn.active{background:#555;color:#fff;border-radius:4px;font-weight:bold}.editor-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;background:#333;padding:5px;border-radius:4px;flex-shrink:0}.editor-toolbar{display:flex;gap:2px;flex-wrap:wrap;min-height:30px;height:auto;flex:1;margin-right:10px;scrollbar-width:none}.editor-toolbar::-webkit-scrollbar{display:none}.toolbar-btn{background:transparent;border:none;color:#fff;font-size:18px;cursor:pointer;padding:4px 8px;border-radius:4px;flex-shrink:0}.toolbar-btn:hover{background:#555}.toolbar-btn-footer{background:transparent;border:none;color:#fff;font-size:18px;cursor:pointer;padding:4px 8px;border-radius:4px}.toolbar-btn-footer:hover{background:#555}.mobile-only{display:none!important}.char-count-display{color:#ccc;font-size:12px;text-align:right;cursor:pointer;user-select:none;min-width:80px;padding:4px;border-radius:4px}.char-count-display:hover{background:#444}.chapter-title-row{margin-bottom:5px;flex-shrink:0}.chapter-title-input{background:#111;color:#fff;border:1px solid #444;padding:8px;width:100%;font-size:16px;font-weight:bold;border-radius:4px;resize:none;height:auto;min-height:40px;overflow-y:hidden}.chapter-title-input:focus{border-color:var(--accent-blue)}.chapter-sidebar{width:250px;border-right:1px solid #444;display:flex;flex-direction:column;margin-right:10px;background:#1a1a1a;border-radius:4px;transition:width .3s ease,margin .3s ease;position:relative}.chapter-sidebar.collapsed{width:0;margin-right:0;overflow:hidden;border:none}.sidebar-header{padding:8px;background:#2a2a2a;border-bottom:1px solid #444;display:flex;justify-content:space-between;align-items:center;font-size:14px;position:relative}.chapter-list{flex:1;overflow-y:auto;min-width:250px}.chapter-item{padding:10px;border-bottom:1px solid #333;cursor:pointer;display:flex;justify-content:space-between;align-items:center;font-size:14px;white-space:normal;word-break:break-word;user-select:none}.chapter-item:hover{background:#2a2a2a}.chapter-item.active{background:#2b4034;color:#fff;border-left:4px solid #4caf50}.chapter-item.dragging{opacity:.5;background:#333;border:2px dashed #666}.chapter-list-title{flex:1;margin-right:5px;word-break:break-word}.chapter-list-count{flex-shrink:0;white-space:nowrap;font-size:.8em;color:#888}.chapter-menu-btn{background:transparent;border:none;color:#fff;font-size:16px;cursor:pointer;padding:2px 6px;margin-left:5px}.chapter-menu-overlay{position:absolute;top:40px;right:10px;width:200px;background:#333;border:1px solid #555;border-radius:6px;z-index:100;display:none;flex-direction:column;box-shadow:0 4px 8px rgba(0,0,0,0.5)}.chapter-menu-item{padding:10px;color:#fff;cursor:pointer;border-bottom:1px solid #444;font-size:14px}.chapter-menu-item:hover{background:#444}.chapter-menu-item:last-child{border-bottom:none}.drag-handle{cursor:grab;color:#888;margin-left:8px;font-size:14px;font-weight:bold;transform:rotate(90deg);display:inline-block;padding:5px;touch-action:none}.chapter-delete-icon{font-size:16px;cursor:pointer;margin-left:5px}.sidebar-footer{padding:8px;border-top:1px solid #444;display:flex;justify-content:space-between;align-items:center;font-size:12px;color:#aaa;min-width:250px}.sidebar-toggle-btn{background:transparent;border:none;color:#888;cursor:pointer;font-size:14px;padding:0 5px}.sidebar-toggle-btn:hover{color:#fff}.sidebar-toggle-open-btn{background:transparent;border:none;color:#888;cursor:pointer;font-size:14px;padding:0 8px;margin-right:5px}.sidebar-toggle-open-btn:hover{color:#fff}.editor-main-area{flex:1;display:flex;flex-direction:column;overflow:hidden}.editor-footer-row{display:flex;justify-content:space-between;align-items:center;margin-top:5px}.stats-card-row{display:flex;gap:10px;margin-bottom:10px}.stats-card{background:#2a2a2a;border:1px solid #444;padding:15px;border-radius:8px;flex:1;display:flex;flex-direction:column;align-items:center}.stats-card .value{font-size:24px;font-weight:bold;color:var(--accent-blue)}.stats-card .unit{font-size:14px;color:var(--text-white);margin-left:2px;font-weight:normal}.preview-modal{position:fixed;top:0;left:0;width:100%;height:100%;background:var(--bg-color);z-index:2000;display:flex;flex-direction:column}.preview-toolbar{height:50px;background:#111;border-bottom:1px solid #444;display:flex;align-items:center;justify-content:space-between;padding:0 15px;flex-shrink:0}.preview-container{flex:1;overflow:auto;padding:20px;display:flex;justify-content:center}.preview-content{font-family:"MS Gothic","MS ゴシック",monospace!important;font-size:var(--pr-font-size);line-height:var(--pr-line-height);color:#f5f5f5;background:#1a1a1a;padding:40px;border-radius:4px;max-width:800px;width:100%;height:100%}.preview-content.vertical-mode{writing-mode:vertical-rl;text-orientation:upright;overflow-x:auto;overflow-y:hidden;height:var(--pr-height,100%);width:auto;max-width:none;margin:0 auto}ruby{font-family:inherit}rt{font-size:.5em;color:inherit;user-select:none}.settings-modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);z-index:3000;display:flex;justify-content:center;align-items:center}.settings-modal-card{background:#2a2a2a;border:1px solid #444;border-radius:8px;width:90%;max-width:320px;padding:20px;display:flex;flex-direction:column;gap:15px;box-shadow:0 4px 12px rgba(0,0,0,0.5)}.settings-header{text-align:center;font-size:18px;font-weight:bold;color:#fff;margin-bottom:5px}.settings-desc{font-size:12px;color:#aaa;text-align:center;margin-bottom:10px}.settings-row{display:flex;justify-content:space-between;align-items:center}.settings-row label{font-size:14px;color:#fff;font-weight:bold}.settings-input-group{display:flex;align-items:center;gap:5px}.settings-input-group input{width:70px;text-align:right;background:#333;border:1px solid #555;color:#fff;padding:8px;border-radius:4px}.settings-input-group span{color:#fff;font-size:14px}.settings-row-col{display:flex;flex-direction:column;gap:5px}.settings-row-col label{font-size:14px;color:#fff;font-weight:bold}.settings-input-group-left{display:flex;align-items:center;gap:10px}.settings-input-group-left input{width:80px;text-align:right;background:#333;border:1px solid #555;color:#fff;padding:8px;border-radius:4px}.settings-input-group-left span{color:#aaa;font-size:12px}.settings-footer{display:flex;border-top:1px solid #444;margin-top:10px;padding-top:15px}.settings-btn-cancel{flex:1;background:transparent;border:none;color:#fff;font-weight:bold;padding:10px;cursor:pointer}.settings-btn-save{flex:1;background:transparent;border:none;color:#89b4fa;font-weight:bold;padding:10px;cursor:pointer;border-left:1px solid #444}.settings-btn-cancel:hover,.settings-btn-save:hover{background:#333}.history-container{display:flex;height:100%;overflow:hidden}.history-sidebar{width:200px;border-right:1px solid #444;display:flex;flex-direction:column;background:#1a1a1a;overflow-y:auto}.history-list-header{background:#222;padding:10px;font-weight:bold;font-size:14px;border-bottom:1px solid #444;flex-shrink:0}.history-list{flex:1;overflow-y:auto}.history-item{padding:10px;border-bottom:1px solid #333;cursor:pointer;font-size:13px;color:#ccc}.history-item:hover{background:#2a2a2a;color:#fff}.history-item.active{background:#2b4034;color:#fff;border-left:4px solid #4caf50}.history-content-area{flex:1;padding:20px;overflow-y:auto;background:#151515;position:relative}.history-diff-view{font-family:var(--font-editor)!important;font-size:16px;line-height:1.8;color:#ddd;white-space:pre-wrap}.diff-added{background-color:rgba(76,175,80,0.2);color:#81c784;text-decoration:none}.diff-removed{background-color:rgba(211,47,47,0.2);color:#e57373;text-decoration:line-through}.char-view-header{display:flex;gap:20px;margin-bottom:20px;align-items:flex-start}.cv-h-icon{width:120px;height:120px;border-radius:6px;background:#333;object-fit:cover;border:2px solid #555}.cv-h-info{flex:1;display:flex;flex-direction:column;gap:5px}.cv-h-ruby{font-size:12px;color:#aaa}.cv-h-name{font-size:24px;font-weight:bold;color:#fff}.cv-split-grid{display:grid;grid-template-columns:auto 1fr auto 1fr;gap:5px 15px;margin-top:10px;align-items:baseline}.cv-h-label{font-size:13px;color:#888}.cv-h-val{font-size:14px;color:#eee}.cv-section{margin-bottom:20px}.cv-section-title{font-size:14px;color:#89b4fa;font-weight:bold;border-bottom:1px solid #444;padding-bottom:2px;margin-bottom:8px}.cv-section-body{font-size:14px;line-height:1.6;color:#ddd;white-space:pre-wrap}.char-input-group{margin-bottom:8px;max-width:220px}.char-input-group label{font-size:11px;color:#aaa;display:block;margin-bottom:2px}.short-num input{width:35px!important}#char-items-container{display:flex;flex-direction:column;gap:5px}#char-edit-mode>*{max-width:800px;margin-left:auto;margin-right:auto}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.auto-expand{overflow-y:hidden}@media(max-width:600px){.dashboard-area{flex-direction:row;align-items:stretch}.top-buttons{width:120px}.list-header{flex-direction:row;align-items:center}.work-item{padding:10px 12px}#tab-editor{flex-direction:column!important;position:relative;overflow:hidden}.chapter-sidebar{display:none;width:100%;height:100%;margin-right:0;margin-bottom:0}.chapter-sidebar.collapsed{width:100%;overflow:auto}.sidebar-toggle-btn,.sidebar-toggle-open-btn{display:none!important}.editor-main-area{display:flex;width:100%;height:100%}.mobile-editor-active .chapter-sidebar{display:flex;position:absolute;z-index:1000;top:0;left:0;background:var(--bg-color)}.mobile-editor-active .editor-main-area{display:none}.mobile-only{display:block!important}.toolbar-btn{font-size:14px;padding:4px 6px}.char-count-display{font-size:10px;min-width:50px}.preview-content{padding:15px}.history-container{flex-direction:column}.history-sidebar{width:100%;height:200px;border-right:none;border-bottom:1px solid #444;flex-shrink:0;overflow-y:auto}.history-list{-webkit-overflow-scrolling:touch}.history-content-area{flex:1}.char-view-header{flex-direction:column;align-items:center;text-align:center}.cv-h-info{align-items:center}.cv-split-grid{grid-template-columns:auto 1fr}}
.plot-view-content{font-size:14px;line-height:1.6;color:#ddd;white-space:pre-wrap;background:#151515;padding:15px;border-radius:6px;min-height:200px}
.tl-view-row{display:flex;align-items:stretch;margin-bottom:5px;background:#2a2a2a;border:1px solid #444;border-radius:4px;overflow:hidden}
.tl-view-time{width:90px;padding:10px;background:#1a1a1a;border-right:1px solid #444;font-size:12px;color:#aaa;display:flex;align-items:center;justify-content:center;text-align:center;word-break:break-all}
.tl-view-text{flex:1;padding:10px;font-size:14px;color:#ddd;white-space:pre-wrap}